<body *ngIf="getValor()">
  <header>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"
    />
  </header>
  <main>
    <div class="wrap">
      <div class="busqueda">
        <input type="text" class="filtrobusqueda" placeholder="¿Que buscas?" />
        <button type="submit" class="boton">
          <i class="fa fa-search"></i>
        </button>
      </div>
    </div>
    <div id="vacio"></div>
    <!-- ----------------------------------------------------------------------------------------------- -->
    <!-- <label id="filtro" for="filtrar"
      >Ordenar por:

      <select id="flitrar">
        <option value="volvo">Filtro</option>
        <option value="antiguos">Más antiguos</option>
        <option value="nuevos">Más Nuevos</option>
        <option value="az">A-Z</option>
        <option value="za">Z-A</option>
      </select>
    </label> -->

    <!-- ----------------------------------------------------------------------------------------------- -->
    <ul class="shelf">
      <li (click)="mostrartype('Misterio')" class="filtro">
        <span class="label"><h2>Misterio</h2></span><span class="top"></span
        ><span class="left"></span><span class="right"></span>
      </li>
      <li (click)="mostrartype('Fantasia')" class="filtro">
        <span class="label"><h2>Fantasia</h2></span><span class="top"></span
        ><span class="left"></span><span class="right"></span>
      </li>
      <li (click)="mostrartype('Historico')" class="filtro">
        <span class="label"><h2>Historico</h2></span><span class="top"></span
        ><span class="left"></span><span class="right"></span>
      </li>
      <li (click)="mostrartype('Biografias')" class="filtro">
        <span class="label"><h2>Biografias</h2></span><span class="top"></span
        ><span class="left"></span><span class="right"></span>
      </li>
      <li (click)="mostrartype('Literatura y lingüísticos')" class="filtro">
        <span class="label"><h2>Literatura</h2></span><span class="top"></span
        ><span class="left"></span><span class="right"></span>
      </li>
      <li (click)="mostrartype('Aventura y ciencia ficcion')" class="filtro">
        <span class="label"><h2>Aventura</h2></span><span class="top"></span
        ><span class="left"></span><span class="right"></span>
      </li>
      <li (click)="mostrartype('Novela policíaca')" class="filtro">
        <span class="label"><h2>Novela</h2></span><span class="top"></span
        ><span class="left"></span><span class="right"></span>
      </li>
      <li (click)="mostrartype('Distopia')" class="filtro">
        <span class="label"><h2>Distopia</h2></span><span class="top"></span
        ><span class="left"></span><span class="right"></span>
      </li>
      <li (click)="mostrartype('Paranormal')" class="filtro">
        <span class="label"><h2>Paranormal</h2></span><span class="top"></span
        ><span class="left"></span><span class="right"></span>
      </li>
      <li (click)="mostrartype('Comic')" class="filtro ultimo">
        <span class="label"><h2>Comic</h2></span><span class="top"></span
        ><span class="left"></span><span class="right"></span>
      </li>
      <li (click)="mostrartype('Comic')" class="filtro ultimo">
        <span class="label"><h2>Todos</h2></span><span class="top"></span
        ><span class="left"></span><span class="right"></span>
      </li>
      <div id="soporte"></div>
    </ul>
    <!-- ------------------------------------------------------------------------------------- -->
    <div class="bookshelf">
      <div class="book" *ngFor="let i of book">
        <div class="oscuro"></div>
        <div (click)="openModal(info)" class="mas">Mas informacion</div>

        <p class="nombreLibro">{{ i.title }}</p>
        <img src="{{ i.photo }}" alt="" />
        <p>{{ i.title }}</p>
         <!-- <p
          id="pedir"
          (click)="getBookUser(i.book_id)"
          (click)="openModal(info)"
        >
          Pedir libro
        </p> -->
        <!-- <p id="favorito" (click)="addFavorito(i.book_id)">Añadir a favoritos</p> -->
      </div>
    </div>
  </main>

<!-- Modal para pedir libro -->
  <ng-template #name>
    <div class="modal-content">
      <div class="modal-header">
        <h3 class="modal-title pull-left">¡Peticion!</h3>
        <button
          type="button"
          class="close pull-right"
          aria-label="Close"
          (click)="modalRef.hide()"
        >
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <div *ngIf="userbook[0];else esFalse">
          <br />
        <h4>Selecciona el usuario del libro</h4>
        <select name="libro" id="selectModal" #elegido>
          <option *ngFor="let item of userbook"
            >{{ item.user_id }},{{ item.nickname }},{{ item.place }}</option
          >
        </select>
        <button  (click)="modalRef.hide()" (click)="postPeticion(elegido.value)" (click)="openModal(name3)">Aceptar</button>
        </div>
        <ng-template #esFalse>
          <h4>Ya tienes este libro</h4>
        </ng-template>
        
      </div>
      <div class="modal-footer">
        <button (click)="modalRef.hide()">Cerar</button>
      </div>
    </div>
  </ng-template>
<!-- Modal aviso favoritos -->
  <ng-template #name2>
    <div class="modal-content">
      <div class="modal-header">
        <h3 class="modal-title pull-left">Favorito!</h3>
        <button
          type="button"
          class="close pull-right"
          aria-label="Close"
          (click)="modalRef.hide()"
        >
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <br />
        <h4>Libro añadido a Favoritos</h4>
      </div>
      <div class="modal-footer">
        <button (click)="modalRef.hide()">Cerrar</button>
      </div>
    </div>
  </ng-template>

  <!-- Modal aviso peticiones -->
  <ng-template #name3>
    <div class="modal-content">
      <div class="modal-header">
        <h3 class="modal-title pull-left">Favorito!</h3>
        <button
          type="button"
          class="close pull-right"
          aria-label="Close"
          (click)="modalRef.hide()"
        >
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <br />
        <h4>Peticion creada</h4>
      </div>
      <div class="modal-footer">
        <button (click)="modalRef.hide()">Cerrar</button>
      </div>
    </div>
  </ng-template>

  <!---------------------------------- Modal para mas informacion del libro ---------------------------------->
  <ng-template  #info>
    <div class="modal-book">
      <div class="modal-header">
        <h3 class="modal-title pull-left">En el camino</h3>
        <button
          type="button"
          class="close pull-right"
          aria-label="Close"
          (click)="modalRef.hide()"
        >
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body modal-book-body">
        <div class="modal-book-top row">
          <div class="modal-book-info col-8">
            <div>
              <p>Autor</p>
              <p>Jack Kerouac</p>
            </div>
            <div>
              <p>Año de publicacion</p>
              <p>1992</p>
            </div>
            <div>
              <p>Editorial</p>
              <p>hola que tal</p>
            </div>
            <div>
              <p>Género</p>
              <p>Misterio</p>
            </div>
          </div>
          <div class="modal-book-img col-4">
            <img src="https://www.anagrama-ed.es/uploads/media/portadas/0001/14/xthumb_13135_portadas_big.jpeg.pagespeed.ic.79uQO4Hban.webp" alt="">
          </div>
        </div>
        <div class="modal-book-bottom row">
          <div class="modal-book-desc col-12">
            <h4>Sinopsis:</h4>
            <p>Lorem ipsum dolor, sit amet consectetur adipisicing elit. Eum necessitatibus in explicabo odit alias eos corrupti illo animi ea exercitationem consequatur iusto laudantium soluta perspiciatis impedit accusantium consectetur, provident fuga.</p>
          </div>
        </div>
      </div>
      <div class="modal-footer modal-book-buttons">
        <button (click)="openModal(name)">Pedir Libro</button>
        <button (click)="openModal(name2)">Añadir a favoritos</button>
      </div>
    </div>
  </ng-template>
</body>

